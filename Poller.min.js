(function(b,a){"object"===typeof exports?module.exports=a():"function"===typeof define&&define.amd?define(a):b.Poller=a()})(this,function(){function b(a,b,c){if("function"!==typeof a)throw Error("Poller.constructor requires the callback to be a function");this.setInterval(b);this.callback=a;this.context=c||null;this.result=this.timeout=null;this.pollCount=0;return this}b.prototype={setInterval:function(a){if("number"!==typeof a&&"[object Number]"!==Object.prototype.toString.call(a))throw Error("Poller.setInterval requires the interval to be numeric");
this.interval=a},start:function(){this.isRunning()||(this.continuePolling=!0,this.result=this.callback.call(this.context,this.result),this.poll());return this},stop:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);this.continuePolling=!1;return this},restart:function(){this.isRunning()&&this.stop();this.start()},isRunning:function(){return!!this.continuePolling},updateInterval:function(a){this.interval!==a&&(this.stop(),this.setInterval(a),this.start());return this},poll:function(){var a=
this;this.isRunning()&&(this.pollCount+=1,this.timeout=setTimeout(function(){a.result=a.callback.call(a.context,a.result);a.continuePolling&&a.poll()},this.interval))},getResult:function(){return this.result}};return b});
